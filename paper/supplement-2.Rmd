---
title: "Supplement 2"
output: 
  bookdown::html_document2:
    keep_md: true
  bookdown::pdf_document2:
    toc: false
bibliography: "supp2.bib"
---

```{r setup, echo = FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      cache = FALSE,
                      message = FALSE,
                      fig.align = "center")
```


```{r loadd-targets}
loadd(gs_football)
loadd(gs_mismatches)
loadd(simulated_afl_data)
loadd(gs_football_final_matches)
loadd(binom_ci_miss_reported)
loadd(n_no_mention_missings)
loadd(binom_ci_data_shared)
```

```{r check}
loadd(n_screened)
print(n_screened)
```


# Systematic search details

The systematic search was performed in accordance with the reporting
requirements of the PRISMA statement [@Moher2009]. The search strategy is
described below. The search protocol was not registered, and no funding
was provided to support the undertaking of the search.

# Objective

This review aimed to estimate the proportion of articles that reported 
missing data in football research.

# Method

Football related articles published in 2019 were studied. Three major
sports medicine databases were searched on May 20, 2020, using key terms and limits. 
The databases were: SPORTDiscus, Embase and Cinahl. A
list of the search terms has been provided in
Table \@ref(tab:search-table-print) below.

```{r search-table}
table_terms <- tibble(
  SPORTDiscus = c("exercise science OR sports science OR physiology OR biomechanics OR nutrition OR training OR testing OR sports medicine OR performance analysis OR performance OR sport psychology OR coaching",
    "football OR soccer OR indoor soccer OR futsal OR rugby league OR rugby union OR gaelic football OR australian rules football OR AFL OR american football OR gridiron football OR touch football"),
  Embase = c("(exercise AND science OR (sports AND science) OR physiology OR biomechanics OR nutrition OR training OR testing OR (sports AND medicine) OR 'performance analysis' OR (('performance'/exp OR performance) AND ('analysis'/exp OR analysis)) OR 'performance'/exp OR performance OR 'sport psychology'/exp OR 'sport psychology' OR (('sport'/exp OR sport) AND ('psychology'/exp OR psychology)) OR 'coaching'/exp OR coaching) AND [2019-2019]/py",
              "(football OR soccer OR (indoor AND soccer) OR futsal OR rugby OR (rugby AND league) OR (rugby AND union) OR (gaelic AND football) OR 'australian rules footbal' OR (('australian'/exp OR australian) AND rules AND footbal) OR afl OR 'american football'/exp OR 'american football' OR (('american'/exp OR american) AND ('football'/exp OR football)) OR 'gridiron football' OR (gridiron AND ('football'/exp OR football)) OR 'touch football' OR (('touch'/exp OR touch) AND ('football'/exp OR football))) AND [2019-2019]/py"),
  Cinahl = c("exercise science OR sports science OR physiology OR biomechanics OR nutrition OR training OR testing OR sports medicine OR performance analysis OR performance OR sport psychology OR coaching",
              "football OR soccer OR indoor soccer OR futsal OR rugby league OR rugby union OR gaelic football OR australian rules football OR AFL OR american football OR gridiron football OR touch football")

)
```

```{r search-table-print}
table_terms %>% 
  kable(caption = "Key search terms and complete search statements for the databases, SPORTDiscuss, Embase, and Cinahl") %>% 
  kable_styling("striped",
                full_width = TRUE) 
```

Included articles were: (a) published in 2019; (b) in English; 
(c) had an accessible full-text; and (d) included quantitative data. 
Studies containing original data, including case studies (with time-series data) 
and n=1 trials, were considered.
The search results were imported into EndNote (version 9.3.2).
Duplicates were removed, and titles and abstracts were screened against
the inclusion criteria. Of the articles identified for full-text
screening, 10% were sampled, at random, for survey. Because \~30% of the
papers from the initial random sample were not eligible for inclusion
(e.g., full-texts not in English, conference abstracts, qualitative
studies), an additional 5% random sample was taken. It was expected that 
30% of the additional 5% random sample would also be ineligible. With this loss,
it was expected that 10% of the articles that remained after title and abstract 
screening would undergo survey. 
Figure \@ref(fig:prisma) summarises the search process.


```{r prisma, fig.cap = "Flowchart of the article search and inclusion for the systematic search. The full-text of 137 articles was reviewed.", warning = FALSE, fig.height = 10, fig.width = 8}
prisma(found = 3863,
       found_other = F,
       no_dupes = 1954, 
       screened = 1373, # (1954 - 1373) 
       screen_exclusions = 581, 
       full_text = 199,
       full_text_exclusions = 62, 
       qualitative = 137, 
       quantitative = 0,
       width = 800, 
       height = 800,
       font_size = 16,
       labels = list(
full_text_exclusions = "Full-text articles excluded (n = 62),
with reasons:
Commentary/letter (n = 4),
Conference abstract (n = 21),
Full-text not available (n = 9),
Infographic (n = 2),
Not in English (n = 17),
Qualitative study (n = 9)
"))

```


Articles were surveyed to determine: (a) whether a missing data
statement was included, or if missing data were acknowledged in a
figure/table; where data were missing, whether (b) data were considered
MCAR, MAR or MNAR; (c) imputation was used; (d) the method used for imputation; 
and (e) whether articles that did not include a missing data
statement shared their data. Two authors independently extracted the
data. Agreement was X%; discrepancies were resolved by NJT. Findings are
reported as the proportion and 95% confidence interval (CI). Confidence
intervals were calculated using the Clopper-Pearson method for the
binomial distribution [@Clopper1934], via the 'binom' package [@binom] in R (version 4.0.2) [@rcore].

# Results

The search returned a total of 3,863 articles (Figure \@ref(fig:prisma)). 

Of the 199 articles screened, `r n_screened` met the inclusion criteria, representing \~10% of the articles found (see Supplement 2, Figure 1). The proportion of articles that reported missing data was `r binom_ci_miss_reported$mean_pct`(95% CI; `r binom_ci_miss_reported$lower_pct` to `r binom_ci_miss_reported$upper_pct`).

Of the articles that did not mention missing data `r n_no_mention_missings` / `r n_screened`, `r binom_ci_data_shared$mean_pct`(95% CI; `r binom_ci_data_shared$lower_pct` to `r binom_ci_data_shared$upper_pct`). shared their dataset, making it difficult to determine whether there was any missingness. While the absence of a missing data statement does not necessarily mean missing data are not being reported, it does suggest that this aspect of the analysis process receives little consideration--especially in contrast to many of the papers that included (potentially meaningless) tests of normality (e.g., Kruskall-Wallis test).

A breakdown of the extracted information is provided in Table 2.


```{r filter-states}
gs_football_missings_stated  <- gs_football_final_matches %>% 
  filter(any_missing_data_statement == 1)
```


```{r binom-calcs}
gs_football_binom_statement <- gs_football_missings_stated %>% 
  football_binom_confint(any_statement_about_mcar_mnar_mar)  %>% 
  percent_binom_conf()

gs_football_binom_explored <- gs_football_missings_stated %>% 
  football_binom_confint(were_missing_data_explored)  %>% 
  percent_binom_conf()

gs_football_binom_imputation <- gs_football_missings_stated %>% 
  football_binom_confint(was_imputation_used) %>% 
  percent_binom_conf()
```

```{r extracted-info}

extractions <- tibble( # This is Table 2
  `Type (i.e., MCAR, MAR or MNAR)` = report_ci(gs_football_binom_statement),
  `Missing data were explored` = report_ci(gs_football_binom_explored),
  `Missing data were imputed` = report_ci(gs_football_binom_imputation)
)

# pivot_then
extractions %>% 
  pivot_longer(cols = everything(),
               names_to = "Reporting of Missingness",
               values_to = "Mean and 95% CI") %>% 
  # turns it into a table
  knitr::kable() %>% 
  kable_styling("striped",
                full_width = TRUE) 
```

There were `r nrow(gs_football_missings_stated)` studies that provided some statement about missing data.

# Summary

A survey of 137 articles published in 2019 on football related topics
showed that only one in 20 reported missing data, suggesting
that missing data are rarely considered by sport science researchers.

# References {-}